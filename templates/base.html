<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ app_name }} - {{ now.strftime('%Y-%m-%d') }}</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/dashboard.css">

    <link rel="stylesheet" href="/static/css/dark.css">



    <style>
        body {
            background-color: #f5f6fa;
        }
        .navbar-brand {
            font-weight: bold;
            letter-spacing: 0.5px;
        }
        .card {
            border-radius: 10px;
        }
        footer {
            margin-top: 50px;
            padding: 20px 0;
            background: #fff;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #666;
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container">
        <a class="navbar-brand" href="/">Sistema SAT</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">

            <ul class="navbar-nav ms-auto">

                <li class="nav-item">
                    <a class="nav-link" href="/search">Buscar</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/tablas">Tablas</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/estadisticas">Estad√≠sticas</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/carga_csv">Carga CSV</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/carga_masiva">Carga TXT</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/historial_cargas">Historial</a>
                </li>

            </ul>
        </div>
    </div>
</nav>

<!-- CONTENIDO PRINCIPAL -->
<div class="container mt-4 mb-5">
    {% block content %}
    {% endblock %}
</div>

<!-- FOOTER -->
<footer>
    Sistema SAT ¬© {{ now.year }} ‚Äî Desarrollado para uso interno
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<li class="nav-item">
    <button id="themeToggle" class="btn btn-sm btn-light ms-3">
        üåô Modo oscuro
    </button>
</li>
<script>
    const toggleBtn = document.getElementById('themeToggle');

    // Cargar preferencia guardada
    const savedTheme = localStorage.getItem('theme') || 'light';
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        toggleBtn.textContent = "‚òÄÔ∏è Modo claro";
        loadDarkCSS();
    }

    // Evento del bot√≥n
    toggleBtn.addEventListener('click', () => {
        if (document.body.classList.contains('dark-mode')) {
            // Cambiar a modo claro
            document.body.classList.remove('dark-mode');
            toggleBtn.textContent = "üåô Modo oscuro";
            localStorage.setItem('theme', 'light');
            removeDarkCSS();
        } else {
            // Cambiar a modo oscuro
            document.body.classList.add('dark-mode');
            toggleBtn.textContent = "‚òÄÔ∏è Modo claro";
            localStorage.setItem('theme', 'dark');
            loadDarkCSS();
        }
    });

    // Cargar CSS oscuro din√°micamente
    function loadDarkCSS() {
        if (!document.getElementById('darkCSS')) {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = '/static/css/dark.css';
            link.id = 'darkCSS';
            document.head.appendChild(link);
        }
    }

    // Remover CSS oscuro
    function removeDarkCSS() {
        const darkLink = document.getElementById('darkCSS');
        if (darkLink) {
            darkLink.remove();
        }
    }
</script>

</body>
</html>
